<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino dApp - Multi Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.0.3/web3.min.js"></script>
    <style>
        /* Casino Theme */
        body {
            background: url('https://i.imgur.com/2WbDj2P.jpg') no-repeat center center fixed;
            background-size: cover;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-size: 36px;
            margin-top: 20px;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
        }

        .container {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            width: 50%;
            margin: auto;
            margin-top: 50px;
            box-shadow: 0px 0px 10px rgba(255, 215, 0, 0.7);
        }

        button {
            background: linear-gradient(to right, gold, orange);
            border: none;
            padding: 12px 20px;
            font-size: 18px;
            color: black;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            margin: 10px;
        }

        button:hover {
            transform: scale(1.1);
            box-shadow: 0px 0px 15px rgba(255, 215, 0, 1);
        }

        input {
            width: 80%;
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            border: none;
            text-align: center;
            font-size: 18px;
        }

        p {
            font-size: 18px;
        }

        #gameResult {
            font-size: 22px;
            font-weight: bold;
            margin-top: 20px;
            color: gold;
        }
    </style>
</head>
<body>
    <h1>üé∞ Welcome to the Blockchain Casino üé∞</h1>
    
    <div class="container">
        <button onclick="connectWallet()">üîó Connect Wallet</button>
        
        <h2>üé¥ Choose Your Game:</h2>
        <button onclick="startGame(0)">‚ô†Ô∏è Play Blackjack</button>
        <button onclick="startGame(1)">‚ô•Ô∏è Play High Card</button>
        <button onclick="startGame(2)">‚ô¶Ô∏è Play Poker Flip</button>

        <p>üí∞ Bet Amount (EVE Tokens):</p>
        <input type="number" id="betAmount" placeholder="Enter bet amount">

        <button onclick="resolveGame()">üÉè Check Result</button>
        
        <p id="wallet">Wallet: Not Connected</p>
        <p id="gameResult"></p>
    </div>

    <script>
        let web3;
        let userAccount;
        const contractAddress = "0x73f56Dcc2777c4d0Cc48FE6546E42eA178483410"; // Your Casino Contract
        const eveTokenAddress = "0x4b6deF4Ac5Ad63D53BF127e27B6EDe14661B2343"; // EVE Token Contract

        const casinoABI = [
            { "constant": false, "inputs": [{"name": "_gameType", "type": "uint8"}, {"name": "_betAmount", "type": "uint256"}], "name": "startGame", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" },
            { "constant": false, "inputs": [], "name": "resolveGame", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }
        ];

        const tokenABI = [
            { "constant": false, "inputs": [{"name": "spender", "type": "address"}, {"name": "amount", "type": "uint256"}], "name": "approve", "outputs": [{"name": "", "type": "bool"}], "stateMutability": "nonpayable", "type": "function" }
        ];

        async function connectWallet() {
            if (typeof window.ethereum !== 'undefined') {
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                web3 = new Web3(window.ethereum);
                const accounts = await web3.eth.getAccounts();
                userAccount = accounts[0];
                document.getElementById("wallet").innerText = `Wallet: ${userAccount}`;
            } else {
                alert("Install Metamask to use this dApp!");
            }
        }

        async function startGame(gameType) {
            const casino = new web3.eth.Contract(casinoABI, contractAddress);
            const eveToken = new web3.eth.Contract(tokenABI, eveTokenAddress);
            const betAmount = document.getElementById("betAmount").value;
            const weiAmount = web3.utils.toWei(betAmount, "ether");

            await eveToken.methods.approve(contractAddress, weiAmount).send({ from: userAccount });
            await casino.methods.startGame(gameType, weiAmount).send({ from: userAccount });

            document.getElementById("gameResult").innerText = "üé≤ Game started! Check result after playing.";
        }

        async function resolveGame() {
            const casino = new web3.eth.Contract(casinoABI, contractAddress);
            await casino.methods.resolveGame().send({ from: userAccount });

            document.getElementById("gameResult").innerText = "üîÑ Checking results...";
        }
    </script>
</body>
</html>
